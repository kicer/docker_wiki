# 433/315MHz RF

## 来源
[凌承芯315/433MHz无线遥控模块](http://www.lchstar.com/product12.html)

![无线模块](/images/find/wireless/8f36ee42e7bbd98a.jpg)

* 一般包括两个DATA引脚？
* 315MHz是国家标准？433MHz是欧洲标准？
* 使用弹簧天线或`线径0.5mm导线，433.92MHz用17cm，315MHz 23cm，尽量将天线拉直放，避开金属。`
* 配合编解码芯片使用较为简单，使用单片机需要软件编解码协议

## 分析

#### 杂波干扰
> 杂波是正常的，在接收模块一上电时，模块的数据脚会输出一个大约在 100hz 左右的正弦波(并非标准)，这个波形的来源有两个部分，分别是因为这个是模块本身元器件产生的和空气中干扰 造成，但在接收到信号时，就会输出一个正确的解码方波，对正常解码并无太大的影响，特别是对于那种固定解码芯片 pt2262/2272 来说，不会造成漏码和误码等问题，直接接线就好。而对于用单片机解码，大多数的客户使用的都是由外部中端来接接收模块的 data 脚， 那么由于我们的接收模块在空闲状态下依旧会产生上下边沿的杂波，那么可能会不断引起单 片机的误判，从而有可能漏掉对正确信号的解码，对于这样的问题，客户可采用软件屏蔽的 办法，一般的编码信号都会有同步头这样的前端编码，而这也是判断正确编码的开始，所以 在中断程序里面尽量只做同步头的检测就好，同时可以的话，也可以做超时的检测，这样以 便能尽快退出中断，为接收下一串的信号做准备。杂波不能完全去掉的。

>> 在无线通讯中使用单片机会对通讯系统造成严重的干扰。如果硬件设计不当，会造成原先硬件解码时通讯距离为 50 米以上，而用软件解码后可能只有十几米，因此解决硬件抗干扰问题在很大程度上可减少软件解码的误码率。

>> a、单片机振荡频率：大量的 MCS51 教材中推荐大家使用的是 12 MHz 及 11.0592 MHz 的晶体，这些晶体在一般场合使用没有问题，但在此却不可以，它们在 300 MHz 左右仍然能够产生较大的干扰，为解决单片机运行速度与电磁干扰的矛盾，建议采用低频率晶振如 4 MHz或 3.58 MHz。

>> b、隔离：为了有效抑制单片机对接收模块的电磁干扰，建议采用电源隔离或端口隔离;端口隔离可采用三极管或比较器。采用隔离的效果非常明显

![杂波干扰](/images/find/wireless/eb087b7d8a661402.jpg)

#### 接收到数据
接收到数据时候，会与原杂波数据有明显区分。数据会重复发送多次，一般以第2次收到的为准。
![接收到数据](/images/find/wireless/31bee767c0ebdf1b.jpg)

#### 数据帧
包括有`同步头`和`数据`两部分。一般为(24+1)*2个脉冲周期。

```
Pulse length
About 300 to 500 microseconds
1/31 time of the synchronization low level.

Synchronization
1 Pulse High + 31 Pulses Low

Bits
0: 1 Pulse High + 3 Pulses Low + 1 Pulse High + 3 Pulses Low
1: 3 Pulses High + 1 Pulse Low + 3 Pulses High + 1 Pulse Low
F: 1 Pulse High + 3 Pulses Low + 3 Pulses High + 1 Pulse Low
(As the bits can be substituted to two states, this is actually the same encoding like the EV1527 and similar chips below)

Telegram
at least 3 times: 12 Tri-state (==24 Two-state) data bits + Sync Bit
```

![数据帧](/images/find/wireless/2e2e636290b878be.jpg)

## 其他知识

#### 固定码、滚动码
```
固定码一般类似PT2262/PT2272硬件编码，遥控器内通过跳线、短路点等修改地址码
滚动码有加密算法加持，可抗重放攻击
学习码特指带学习按键，不限定固定码或滚动码？

滚动码一般都是用在汽车、卷帘门等重要场合，一般电动车等使用的遥控器为固定码。
```

#### 超外差、超再生
```
超外差不差～ 一般带芯片的都是超外差方案，超再生是各种元件组合的检波电路。
一般超外差价格稍贵，但方案简单、稳定性好。
```

> 超外差接收模块采用超外差式解调电路，它是设置振荡电路产生振荡信号，与接收到的载频信号混频后，得到中频(一般为465kHz)信号，经中频放大和检波，解调出数据信号。超外差接收模块灵敏高达-110DBM~125DBM，接收距离远，抗干扰能力强.，稳定性高，一致性好，故障率低。工作温度为:：-40度~+80度。超外差接收模块外围元件少，集成化程度高，采用晶体稳频，不会随温度，环境的变化而出货频率漂移，数据丢失的现像。接收模块本振辐射低，无二次辐射，性能指标好，容易通过FCC或者CE等标准的检测，符合工业使用规范.。 适合用于质量较高的无线遥控领域，如汽车电子，智能家居，遥控电动门窗，工业控制等领域。

> 超再生接收模块采用超再生检波电路，对于工作于短波段的无线遥控或通信设备，再生检波的灵敏度及稳定性都不符合要求。但超再生检波在短波段却具有很高的灵敏度，在接收弱信号时放大率可达几十万倍，因此,，对于希望电路简单、成本低廉，对选择性和信噪比要求不高的简单无线遥控通信设备(如电动车防盗器等产品)，超再生接收模块还是颇有实用价值的.。 通常超再生接收模块的灵敏度约-85~95DBM，用可调电感稳频，所用器件多，故障率高，稳定性差,，加工复杂.，抗干扰能力差，不能在过高或者过低的环境下工作，会随温度，环境的变化而出现频率漂移，数据丢失的现像。由于易频率漂移，所以超再生接收模块的使用寿命也相对缩短。

#### ASK/FM/FSK
```
FM即调频。使载波的频率随调制信号的幅度变化。
AM即调频。使载波的幅度随调制信号的幅度变化。
FSK频移键控。就是用数字信号去调制载波的频率。
ASK指的是振幅键控方式。这种调制方式是根据信号的不同,调节正弦波的幅度。幅度键控可以通过乘法器和开关电路来实现。
PSK相移键控。在相移键控中，在波相位受数字基带信号的控制，如在二进制基带信号中为0时，载波相位为0，为1时载波相位为π,载波相位和基带信号有一一对应的关系
```

#### 声表谐振器SAW
> 声表面谐振器也就是声表面滤波器，简称SAWF或SAW，是利用压电陶瓷、铌酸锂、石英等压电晶体振荡器材料的压电效应和声表面波传播的物理特性制成的一种换能式无源带通滤波器

## 资料
[github:rc-switch](https://github.com/sui77/rc-switch)

[Know How Line Coding](https://github.com/sui77/rc-switch/wiki/KnowHow_LineCoding)

[FCC和ETSI对ASK调制、短距离UHF发送器的要求](https://www.maximintegrated.com/cn/app-notes/index.mvp/id/3587)
